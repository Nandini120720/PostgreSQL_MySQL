 
 $$$$$$$$$$$$ Tablespace
1)System Tablespace             (by default Tablespace name = ibdata1)
2)File-Per-Table Tablespaces
3)General Tablespaces
4)Undo Tablespaces              by default Tablespace name = ibtemp1
5)The Temporary Tablespace      




MySQL> SELECT TABLESPACE_NAME, FILE_NAME FROM information_schema.FILES;

$$$$$ Here the system is creating a default name for the tablespace. These system generated tablespaces are called - Single-Table tablespaces
Single-Table tablespaces are created by system only when innodb_file_per_table is ON
It can be checked by -

MySQL> SHOW VARIABLES LIKE "innodb_file_per_table";
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| innodb_file_per_table | ON    |
+-----------------------+-------+
MySQL> SET GLOBAL innodb_file_per_table = ON;    (if not then we set by using this command)

MySQL> CREATE TABLESPACE tablespace_name ADD DATAFILE 'file_name' FILE_BLOCK_SIZE = value ENGINE = engine_name;      (Syntax)
MySQL> CREATE TABLESPACE tablespace1 ADD DATAFILE '/var/lib/mysql/tablespace1.ibd' engine = Innodb; 

$$$$$ Here all tablespaces are created in Mysql datadir which by default is /var/lib/mysql/
The datadir value can be checked by the following command -

MySQL> SELECT @@datadir;
+-----------------+
| @@datadir       |
+-----------------+
| /var/lib/mysql/ |
+-----------------+
In MySQL only one datafile can be added per tablespace. But in Oracle or SQL Server multiple datafiles can be added to a tablespace.


There are two types of tablespaces, general (or shared) tablespace and file-per-table. For shared  tablespaces, data from many different  tables and 
their corresponding indexes may reside in a single .ibd file. Whereas, for file-per-table tablespaces, the data of a single table and its indexes  reside in one .ibd file.

Default page size (in oracle it is block size) is 16kb



mysql> SELECT FILE_NAME, TABLESPACE_NAME, ENGINE, INITIAL_SIZE, TOTAL_EXTENTS*EXTENT_SIZE AS TotalSizeBytes, DATA_FREE, MAXIMUM_SIZE FROM INFORMATION_SCHEMA.FILES WHERE TABLESPACE_NAME = 'innodb_temporary'\G

*************************** 1. row ***************************
      FILE_NAME: ./ibtmp1
TABLESPACE_NAME: innodb_temporary
         ENGINE: InnoDB
   INITIAL_SIZE: 12582912
 TotalSizeBytes: 12582912
      DATA_FREE: 6291456
   MAXIMUM_SIZE: NULL

mysql> SELECT * FROM INFORMATION_SCHEMA.FILES WHERE TABLESPACE_NAME='innodb_temporary'\G

mysql> SELECT @@innodb_temp_data_file_path;
+------------------------------+
| @@innodb_temp_data_file_path |
+------------------------------+
| ibtmp1:12M:autoextend        |
+------------------------------+  


$$$$$$ The System Tablespace
The system tablespace is the storage area for the change buffer. It may also contain table and index data if tables are created in the system tablespace rather than file-per-table or general tablespaces.
In previous MySQL versions, the system tablespace contained the InnoDB data dictionary. In MySQL 8.0, InnoDB stores metadata in the MySQL data dictionary.

  Resizing the InnoDB system tablespace
If you want a tablespace containing a fixed-size 50 MB data file named ibdata1 and a 50 MB auto-extending file named ibdata2 in the data directory, it can be configured like this:

1) Stop MySQL server:
shell> sudo systemctl stop mysql

2) Check the size of the existing ibdata1 file:
shell> sudo ls -lhtr /var/lib/mysql/ibdata1 

3) Mount the new disk. Assuming it is mounted on /var/lib/mysql_extend, change the ownership to mysql; make sure that the file is not already created. If you are using AppArmour or SELinux, make sure you set the alias or context correctly:
shell> sudo chown mysql:mysql /var/lib/mysql_extend
shell> sudo chmod 750 /var/lib/mysql_extend
shell> sudo ls -lhtr /var/lib/mysql_extend

4) Open the my.cnf and add the following:
shell> sudo vi /etc/my.cnf
[mysqld]
innodb_data_home_dir=
innodb_data_file_path = ibdata1:76M;/var/lib/mysql_extend/ibdata2:50M:autoextend

5) Start MySQL server:
shell> sudo systemctl start mysql

mysql> SHOW VARIABLES LIKE 'innodb_data_file_path';
+-----------------------+----------------------------------------------------------+
| Variable_name         | Value                                                    |
+-----------------------+----------------------------------------------------------+
| innodb_data_file_path | ibdata1:12M;/var/lib/mysql_extend/ibdata2:50M:autoextend |
+-----------------------+----------------------------------------------------------+
1 row in set (0.00 sec)


$$$$$ Undo Tablespaces
Two default undo tablespaces are created when the MySQL instance is initialized. 
Default undo tablespaces are created in the location defined by the innodb_undo_directory variable. 
files are named undo_001 and undo_002.

Adding Undo Tablespaces
mysql> CREATE UNDO TABLESPACE tablespace_name ADD DATAFILE 'file_name.ibu';
If the undo tablespace file name does not include a path, the undo tablespace is created in the directory defined by the innodb_undo_directory variable. 
If that variable is undefined, the undo tablespace is created in the data directory.

To view undo tablespace names and paths, query INFORMATION_SCHEMA.FILES:
mysql> SELECT TABLESPACE_NAME, FILE_NAME FROM INFORMATION_SCHEMA.FILES WHERE FILE_TYPE LIKE 'UNDO LOG';
  
Dropping Undo Tablespaces
mysql> ALTER UNDO TABLESPACE tablespace_name SET INACTIVE; 
mysql> DROP UNDO TABLESPACE tablespace_name;
 
mysql> SELECT NAME, STATE FROM INFORMATION_SCHEMA.INNODB_TABLESPACES WHERE NAME LIKE 'tablespace_name';  
mysql> SELECT TABLESPACE_NAME, FILE_NAME FROM INFORMATION_SCHEMA.FILES WHERE FILE_TYPE LIKE 'UNDO LOG';

Configuring the Number of Rollback Segments
The default setting for innodb_rollback_segments is 128, 

Automated Truncation
Automated truncation of undo tablespaces requires a minimum of two active undo tablespaces, which ensures that one undo tablespace remains active while the other is taken offline to be truncated. By default, two undo tablespaces are created when the MySQL instance is initialized.
To have undo tablespaces automatically truncated, enable the innodb_undo_log_truncate variable. For example:
mysql> SET GLOBAL innodb_undo_log_truncate=ON;

mysql> SELECT @@innodb_max_undo_log_size;
+----------------------------+
| @@innodb_max_undo_log_size |
+----------------------------+
|                 1073741824 |
+----------------------------+

Manual Truncation
Manual truncation of undo tablespaces requires a minimum of three active undo tablespaces. Two active undo tablespaces are required at all times to support the possibility that automated truncation is enabled. A minimum of three undo tablespaces satisfies this requirement while permitting an undo tablespace to be taken offline manually.
To manually initiate truncation of an undo tablespace, deactivate the undo tablespace by issuing the following statement:
mysql> ALTER UNDO TABLESPACE tablespace_name SET INACTIVE;

After the undo tablespace is marked as inactive, transactions currently using rollback segments in the undo tablespace are permitted to finish, 
as are any transactions started before those transactions are completed. After transactions are completed, the purge system frees the rollback segments in the undo tablespace, the undo tablespace is truncated to its initial size, and the undo tablespace state changes from inactive to empty.

To check the state of an undo tablespace, query the Information Schema INNODB_TABLESPACES table.
mysql> SELECT NAME, STATE FROM INFORMATION_SCHEMA.INNODB_TABLESPACES WHERE NAME LIKE 'tablespace_name';

Once the undo tablespace is in an empty state, it can be reactivated by issuing the following statement:
mysql> ALTER UNDO TABLESPACE tablespace_name SET ACTIVE;


$$$$$ File-Per-Table Tablespaces
InnoDB creates tables in file-per-table tablespaces by default. This behavior is controlled by the innodb_file_per_table variable. 
Disabling innodb_file_per_table causes InnoDB to create tables in the system tablespace.

mysql> SET GLOBAL innodb_file_per_table=ON;

$$$$$ General Tablespaces
Similar to the system tablespace, general tablespaces are shared tablespaces capable of storing data for multiple tables.

Creating a General Tablespace
mysql> CREATE TABLESPACE tablespace_name [ADD DATAFILE 'file_name'] [FILE_BLOCK_SIZE = value] [ENGINE [=] engine_name]      (syntax)

$$$$ Adding Tables to a General Tablespace
mysql> CREATE TABLE t1 (c1 INT PRIMARY KEY) TABLESPACE ts1;
mysql> ALTER TABLE t2 TABLESPACE ts1;

$$$$$ Moving Tables Between Tablespaces Using ALTER TABLE
ALTER TABLE with the TABLESPACE option can be used to move a table to an existing general tablespace, to a new file-per-table tablespace, or to the system tablespace.

To move a table from a file-per-table tablespace or from the system tablespace to a general tablespace, specify the name of the general tablespace. The general tablespace must exist. See ALTER TABLESPACE for more information.
mysql> ALTER TABLE tbl_name TABLESPACE [=] tablespace_name; 

To move a table from a general tablespace or file-per-table tablespace to the system tablespace, specify innodb_system as the tablespace name.
mysql> ALTER TABLE tbl_name TABLESPACE [=] innodb_system;

To move a table from the system tablespace or a general tablespace to a file-per-table tablespace, specify innodb_file_per_table as the tablespace name.
mysql> ALTER TABLE tbl_name TABLESPACE [=] innodb_file_per_table;

Renaming a General Tablespace
mysql> ALTER TABLESPACE s1 RENAME TO s2;

Dropping a General Tablespace
mysql> DROP TABLESPACE ts1;


$$$$$ Temporary Tablespaces
InnoDB uses session temporary tablespaces and a global temporary tablespace.

mysql> SELECT * FROM INFORMATION_SCHEMA.FILES WHERE TABLESPACE_NAME='innodb_temporary'\G

By default, the global temporary tablespace data file is autoextending and increases in size as necessary.
mysql> SELECT @@innodb_temp_data_file_path;
+------------------------------+
| @@innodb_temp_data_file_path |
+------------------------------+
| ibtmp1:12M:autoextend        |
+------------------------------+

To check the size of global temporary tablespace data files, examine the Information Schema FILES table using a query similar to this one:
mysql> SELECT FILE_NAME, TABLESPACE_NAME, ENGINE, INITIAL_SIZE, TOTAL_EXTENTS*EXTENT_SIZE AS TotalSizeBytes, DATA_FREE, MAXIMUM_SIZE FROM INFORMATION_SCHEMA.FILES WHERE TABLESPACE_NAME = 'innodb_temporary'\G

*************************** 1. row ***************************
      FILE_NAME: ./ibtmp1
TABLESPACE_NAME: innodb_temporary
         ENGINE: InnoDB
   INITIAL_SIZE: 12582912
 TotalSizeBytes: 12582912
      DATA_FREE: 6291456
   MAXIMUM_SIZE: NULL
   
[mysqld]
innodb_temp_data_file_path=ibtmp1:12M:autoextend:max:500M



$$$$$ Moving Tablespace Files While the Server is Offline
for moving physical directory/file/tablespace must know to innodb storage engine.  following are configuration path which must be set to know system where is path of that tablespace
innodb_data_home_dir (system tablespace), innodb_undo_directory (undo tablespace), innodb_temp_data_file_path (temp tablespace) and datadir (general (or shared) tablespace and file-per-table) 

Make the new directory known to InnoDB.
Startup command:
mysqld --innodb-directories="directory_path_1;directory_path_2"
or
MySQL option file:
[mysqld]
innodb_directories="directory_path_1;directory_path_2"   

Before moving files or directories, review the usage notes that follow.
1)Stop the server.
2)Move the tablespace files or directories to the desired location.
3)Make the new directory known to InnoDB.
   
#   If moving individual file-per-table or general tablespace files, add unknown directories to the innodb_directories value.
The directories defined by the innodb_data_home_dir, innodb_undo_directory, and datadir variables are automatically appended to the innodb_directories argument value, so you need not specify these.

A file-per-table tablespace file can only be moved to a directory with same name as the schema. For example, if the actor table belongs to the sakila schema, then the actor.ibd data file can only be moved to a directory named sakila.

General tablespace files cannot be moved to the data directory or a subdirectory of the data directory.

If moving system tablespace files, undo tablespaces, or the data directory, update the innodb_data_home_dir, innodb_undo_directory, and datadir settings, as necessary.

4)Restart the server.

$$$$$$$$$ Tablespace AUTOEXTEND_SIZE Configuration
To configure the extension size for a file-per-table tablespace or general tablespace, specify the AUTOEXTEND_SIZE size in a CREATE TABLE or ALTER TABLE statement:
mysql> CREATE TABLE t1 (c1 INT) AUTOEXTEND_SIZE = 4M;
mysql> ALTER TABLE t1 AUTOEXTEND_SIZE = 8M;

mysql> SELECT @@GLOBAL.innodb_page_size;      (To see page size)
+---------------------------+
| @@GLOBAL.innodb_page_size |
+---------------------------+
|                     16384 |
+---------------------------+

To determine the AUTOEXTEND_SIZE for any InnoDB tablespace
mysql> SELECT NAME, AUTOEXTEND_SIZE FROM INFORMATION_SCHEMA.INNODB_TABLESPACES WHERE NAME LIKE 'ts1';
+------+-----------------+
| NAME | AUTOEXTEND_SIZE |
+------+-----------------+
| ts1  |         4194304 |
+------+-----------------+

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------



mysql> CREATE TABLESPACE tablespace_name [ADD DATAFILE 'file_name'][FILE_BLOCK_SIZE = value][ENGINE [=] engine_name]

mysql> CREATE TABLESPACE sample ADD DATAFILE 'sample.ibd' ENGINE = INNODB;
mysql> CREATE TABLESPACE `ts1` ADD DATAFILE '/my/tablespace/directory/ts1.ibd' Engine=InnoDB;

mysql> select * from INFORMATION_SCHEMA.FILES where TABLESPACE_NAME ='sample'\G;  (it can show all the metadata)


list of tablespace and the corresponding datafile
mysql> SELECT TABLESPACE_NAME, FILE_NAME FROM information_schema.FILES;

Adding to the excellent answer provided by @BhupeshPant

Storage of InnoDB is divided into tablespaces. A Tablespace is a logical structure associated with multiple data files (objects). Each tablespace contains pages(blocks), extents and segments.

enter image description here

Pages - A smallest piece of data for InnoDB also known as blocks. A page can hold one or more rows depending upon row size.

In general, every table has it's own tablespace that is associated with one datafile

The following command displays a full list of tablespace and the corresponding datafile -

SELECT TABLESPACE_NAME, FILE_NAME FROM information_schema.FILES;
To get a more proper under standing create a sample database - database1

CREATE DATABASE database1;
USE database1;
Now create a sample table table1 -

CREATE TABLE table1 (
    -> col1 INT
    -> );
Now we can see that the corresponding tablespace and datafile has also been created -

SELECT TABLESPACE_NAME, FILE_NAME FROM information_schema.FILES;

+--------------------------+--------------------------+
| TABLESPACE_NAME          | FILE_NAME                |
+--------------------------+--------------------------+
|database1/table1          | ./database1/table1.ibd   |
+--------------------------+--------------------------+
Here the .ibd extension signifies Innodb datafile

Now create another sample table table2 -

CREATE TABLE table2 (
    -> col1 INT
    -> );
We can again see that the corresponding tablespace and datafile has been created -

SELECT TABLESPACE_NAME, FILE_NAME FROM information_schema.FILES;

+---------------------------+--------------------------+
| TABLESPACE_NAME           | FILE_NAME                |
+---------------------------+--------------------------+
| database1/table1          | ./database1/table1.ibd   |
| database1/table2          | ./database1/table2.ibd   |
+---------------------------+--------------------------+
Here the system is creating a default name for the tablespace. These system generated tablespaces are called - Single-Table tablespaces

Single-Table tablespaces are created by system only when innodb_file_per_table is ON

It can be checked by -

SHOW VARIABLES LIKE "innodb_file_per_table";
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| innodb_file_per_table | ON    |
+-----------------------+-------+
By default, the values is ON. It can be turned off by -

SET GLOBAL innodb_file_per_table = OFF;

SHOW VARIABLES LIKE "innodb_file_per_table";
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| innodb_file_per_table | OFF   |
+-----------------------+-------+
